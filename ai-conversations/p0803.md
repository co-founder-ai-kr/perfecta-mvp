# 민순의 요청

```text
* 역할: 너는 앱스 스크립트와 연동하는 프론트엔드 개발자야.
* 상황: 자바스크립트를 모르는 창업가가 앱스 스크립트 데이터를 화면에 보여주려는데 로딩 시간이 길어 걱정이야.
* 과업: 
  1. fetch 함수로 데이터를 가져오는 코드를 작성해 줘.
  2. 데이터 로딩 중에 ‘선물을 찾고 있습니다...’ 문구와 애니메이션이 보이게 해 줘.
* 제약: 
  - 주석은 비즈니스 로직(Why) 위주로 달아 줘.
  - HTML 파일 내 script 태그 안에 넣을 코드를 작성해 줘.
* 출력: 자바스크립트 코드 블록
* 입력: [앱스 스크립트 배포 URL 붙여넣기]
```

# 제미나이의 응답

안녕하세요! 앱스 스크립트와 연동하는 프론트엔드 개발자입니다.

창업가님, 데이터가 많아지면 로딩 시간이 길어지는 건 자연스러운 현상입니다. 중요한 건 **"고객이 기다리는 시간을 지루하지 않게 느끼게 하는 것"**이죠.

요청하신 대로 데이터를 가져오는 동안 **'선물을 찾고 있습니다...'**라는 문구와 함께 빙글빙글 도는 애니메이션을 보여주는 코드를 작성했습니다.

이 코드를 HTML 파일의 `<body>` 태그 안쪽, 혹은 원하시는 위치에 붙여넣으시면 됩니다.

```html
<!-- 1. 로딩 화면과 데이터가 표시될 영역을 만듭니다 -->
<style>
  /* 로딩 애니메이션 스타일 (빙글빙글 도는 원) */
  .loader {
    border: 4px solid #f3f3f3;
    border-top: 4px solid #3498db;
    border-radius: 50%;
    width: 30px;
    height: 30px;
    animation: spin 1s linear infinite;
    margin: 0 auto 10px auto; /* 중앙 정렬 */
  }

  @keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
  }

  /* 로딩 컨테이너 디자인 */
  #loading-container {
    text-align: center;
    padding: 20px;
    font-family: sans-serif;
    color: #555;
  }
</style>

<!-- 로딩 중일 때 보일 요소 -->
<div id="loading-container">
  <div class="loader"></div>
  <p>선물을 찾고 있습니다...</p>
</div>

<!-- 데이터가 로드되면 보일 요소 (처음에는 숨김 처리) -->
<div id="data-container" style="display: none;">
  <!-- 여기에 데이터가 들어갑니다 -->
</div>

<script>
  // [입력] 여기에 앱스 스크립트 배포 URL을 넣어주세요.
  const APPS_SCRIPT_URL = "[앱스 스크립트 배포 URL 붙여넣기]";

  async function loadGiftData() {
    // 화면 요소들을 변수로 가져옵니다.
    const loadingContainer = document.getElementById('loading-container');
    const dataContainer = document.getElementById('data-container');

    try {
      // 1. 비즈니스 로직: 데이터를 요청하기 시작했으므로, 고객에게 로딩 화면을 유지합니다.
      // (HTML에서 이미 보이고 있으므로 별도 조작 불필요)

      // 2. 비즈니스 로직: 앱스 스크립트 서버로 데이터를 요청합니다. (비동기 통신)
      const response = await fetch(APPS_SCRIPT_URL);
      
      // 3. 비즈니스 로직: 서버 응답이 정상인지 확인합니다. 실패 시 에러 처리를 위해 이동합니다.
      if (!response.ok) {
        throw new Error('데이터를 가져오는데 실패했습니다.');
      }

      // 4. 비즈니스 로직: 받아온 데이터를 자바스크립트 객체(JSON)로 변환합니다.
      const data = await response.json();

      // 5. 비즈니스 로직: 데이터가 준비되었으므로 로딩 화면을 숨기고, 실제 콘텐츠를 보여줍니다.
      loadingContainer.style.display = 'none';
      dataContainer.style.display = 'block';

      // 6. 비즈니스 로직: 가져온 데이터를 화면에 예쁘게 뿌려줍니다.
      renderData(data);

    } catch (error) {
      // 예외 처리: 인터넷 연결 문제나 서버 오류 시 고객에게 안내합니다.
      console.error(error);
      loadingContainer.innerHTML = "<p>죄송합니다. 선물을 찾는 도중 오류가 발생했습니다.</p>";
    }
  }

  // 데이터를 화면에 그리는 함수 (예시)
  function renderData(data) {
    const container = document.getElementById('data-container');
    
    // 데이터가 배열이라고 가정하고 목록을 만듭니다.
    // 실제 데이터 구조에 맞춰 수정이 필요할 수 있습니다.
    const listHtml = data.map(item => `<p>🎁 ${JSON.stringify(item)}</p>`).join('');
    
    container.innerHTML = `<h3>도착한 선물 목록</h3>${listHtml}`;
  }

  // 페이지가 로드되면 바로 데이터 가져오기 시작
  loadGiftData();
</script>
```

### 💡 개발자의 조언
1.  **`[앱스 스크립트 배포 URL 붙여넣기]`** 부분에 실제 `exec`로 끝나는 URL을 꼭 넣어주세요.
2.  `renderData` 함수는 데이터를 단순히 텍스트로 보여주게 되어 있습니다. 나중에 디자인이 확정되면 이 부분만 예쁘게 꾸미시면 됩니다.
3.  로딩 애니메이션은 고객의 이탈을 막는 아주 중요한 장치입니다. 잘 생각하셨습니다!